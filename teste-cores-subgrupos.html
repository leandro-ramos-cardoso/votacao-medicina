<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Cores Subgrupos</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .subgroup-btn {
            width: 120px;
            height: 100px;
            margin: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            display: inline-block;
        }
        
        .subgroup-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .subgroup-btn.disabled {
            background: #f8f9fa;
            border-color: #e74c3c;
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        .subgroup-btn.disabled:hover {
            transform: none;
            box-shadow: none;
        }
        
        .controls {
            margin: 20px 0;
            padding: 15px;
            background: #e8f5e8;
            border-radius: 5px;
        }
        
        .log {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #2980b9;
        }
        
        .stats {
            background: #e8f5e8;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Teste: Cores dos Subgrupos</h1>
        
        <div class="controls">
            <h3>Controles de Teste</h3>
            <button onclick="adicionarInscricao('A1')">+ A1</button>
            <button onclick="adicionarInscricao('A2')">+ A2</button>
            <button onclick="adicionarInscricao('A3')">+ A3</button>
            <button onclick="adicionarInscricao('A4')">+ A4</button>
            <button onclick="adicionarInscricao('A5')">+ A5</button>
            <br>
            <button onclick="adicionarInscricao('B1')">+ B1</button>
            <button onclick="adicionarInscricao('B2')">+ B2</button>
            <button onclick="adicionarInscricao('B3')">+ B3</button>
            <button onclick="adicionarInscricao('B4')">+ B4</button>
            <button onclick="adicionarInscricao('B5')">+ B5</button>
            <br><br>
            <button onclick="resetarDados()" style="background: #e74c3c;">üîÑ Resetar Dados</button>
            <button onclick="testarLotado()" style="background: #f39c12;">üß™ Testar Lotado</button>
        </div>
        
        <div class="stats">
            <h3>üìä Estat√≠sticas</h3>
            <div id="statsDisplay"></div>
        </div>
        
        <h3>Grupo A</h3>
        <div id="grupoA"></div>
        
        <h3>Grupo B</h3>
        <div id="grupoB"></div>
        
        <div class="log">
            <h4>üìù Log de Eventos</h4>
            <div id="log"></div>
        </div>
    </div>

    <script>
        // Estado da aplica√ß√£o
        let estatisticas = {
            grupoA: 0,
            grupoB: 0,
            subgrupos: {
                'A1': 0, 'A2': 0, 'A3': 0, 'A4': 0, 'A5': 0,
                'B1': 0, 'B2': 0, 'B3': 0, 'B4': 0, 'B5': 0
            }
        };
        
        let inscricoes = [];

        function log(mensagem) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${timestamp}] ${mensagem}<br>`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(mensagem);
        }

        function adicionarInscricao(subgrupo) {
            const votosAtuais = estatisticas.subgrupos[subgrupo] || 0;
            
            if (votosAtuais >= 9) {
                log(`‚ùå ${subgrupo} est√° LOTADO (${votosAtuais}/9). N√£o √© poss√≠vel adicionar mais.`);
                return;
            }
            
            // Adicionar inscri√ß√£o
            const inscricao = {
                nome: `Usu√°rio ${inscricoes.length + 1}`,
                grupo: subgrupo.charAt(0),
                subgrupo: subgrupo,
                data: new Date().toISOString()
            };
            
            inscricoes.push(inscricao);
            calcularEstatisticas();
            atualizarInterface();
            
            log(`‚úÖ Adicionado inscri√ß√£o em ${subgrupo}: ${votosAtuais + 1}/9`);
        }

        function calcularEstatisticas() {
            // Calcular estat√≠sticas
            estatisticas.grupoA = inscricoes.filter(i => i.grupo === 'A').length;
            estatisticas.grupoB = inscricoes.filter(i => i.grupo === 'B').length;

            // Estat√≠sticas por subgrupo
            estatisticas.subgrupos = {};
            for (let i = 1; i <= 5; i++) {
                const subgrupoA = `A${i}`;
                const subgrupoB = `B${i}`;
                
                estatisticas.subgrupos[subgrupoA] = inscricoes.filter(insc => insc.subgrupo === subgrupoA).length;
                estatisticas.subgrupos[subgrupoB] = inscricoes.filter(insc => insc.subgrupo === subgrupoB).length;
            }
            
            log('üìä Estat√≠sticas recalculadas');
        }

        function atualizarInterface() {
            // Atualizar display de estat√≠sticas
            const statsDisplay = document.getElementById('statsDisplay');
            statsDisplay.innerHTML = `
                <strong>Grupo A:</strong> ${estatisticas.grupoA}/45 | 
                <strong>Grupo B:</strong> ${estatisticas.grupoB}/45
                <br>
                <strong>Subgrupos:</strong> ${Object.entries(estatisticas.subgrupos).map(([k,v]) => `${k}:${v}`).join(' ')}
            `;

            // Atualizar Grupo A
            const grupoA = document.getElementById('grupoA');
            grupoA.innerHTML = '';
            
            for (let i = 1; i <= 5; i++) {
                const subgrupo = `A${i}`;
                const votosSubgrupo = estatisticas.subgrupos[subgrupo] || 0;
                const disponivel = votosSubgrupo < 9;
                const vagasRestantes = 9 - votosSubgrupo;

                const btn = document.createElement('button');
                btn.className = `subgroup-btn ${disponivel ? '' : 'disabled'}`;
                
                if (disponivel) {
                    btn.innerHTML = `
                        <strong>${subgrupo}</strong><br>
                        <span style="font-size: 1.2em; color: #2c3e50; font-weight: bold;">${votosSubgrupo}/9</span><br>
                        <span style="font-size: 0.9em; color: #27ae60; font-weight: bold;">${vagasRestantes} vagas restantes</span>
                    `;
                    btn.onclick = () => adicionarInscricao(subgrupo);
                } else {
                    btn.innerHTML = `
                        <strong>${subgrupo}</strong><br>
                        <span style="font-size: 1.2em; color: #e74c3c; font-weight: bold;">9/9</span><br>
                        <span style="font-size: 0.9em; color: #e74c3c; font-weight: bold;">LOTADO</span>
                    `;
                    btn.onclick = null;
                }

                grupoA.appendChild(btn);
            }

            // Atualizar Grupo B
            const grupoB = document.getElementById('grupoB');
            grupoB.innerHTML = '';
            
            for (let i = 1; i <= 5; i++) {
                const subgrupo = `B${i}`;
                const votosSubgrupo = estatisticas.subgrupos[subgrupo] || 0;
                const disponivel = votosSubgrupo < 9;
                const vagasRestantes = 9 - votosSubgrupo;

                const btn = document.createElement('button');
                btn.className = `subgroup-btn ${disponivel ? '' : 'disabled'}`;
                
                if (disponivel) {
                    btn.innerHTML = `
                        <strong>${subgrupo}</strong><br>
                        <span style="font-size: 1.2em; color: #2c3e50; font-weight: bold;">${votosSubgrupo}/9</span><br>
                        <span style="font-size: 0.9em; color: #27ae60; font-weight: bold;">${vagasRestantes} vagas restantes</span>
                    `;
                    btn.onclick = () => adicionarInscricao(subgrupo);
                } else {
                    btn.innerHTML = `
                        <strong>${subgrupo}</strong><br>
                        <span style="font-size: 1.2em; color: #e74c3c; font-weight: bold;">9/9</span><br>
                        <span style="font-size: 0.9em; color: #e74c3c; font-weight: bold;">LOTADO</span>
                    `;
                    btn.onclick = null;
                }

                grupoB.appendChild(btn);
            }
        }

        function resetarDados() {
            inscricoes = [];
            calcularEstatisticas();
            atualizarInterface();
            log('üîÑ Dados resetados');
        }

        function testarLotado() {
            // Adicionar 9 inscri√ß√µes em A1 para testar
            for (let i = 0; i < 9; i++) {
                adicionarInscricao('A1');
            }
            log('üß™ Teste de lota√ß√£o conclu√≠do - A1 deve estar LOTADO');
        }

        // Inicializar
        log('üöÄ Teste iniciado');
        atualizarInterface();
    </script>
</body>
</html> 