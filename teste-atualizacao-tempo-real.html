<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Atualiza√ß√£o Tempo Real</title>
    <style>
        .subgroup-btn {
            background: #ecf0f1;
            border: 2px solid #bdc3c7;
            border-radius: 10px;
            padding: 20px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #2c3e50;
            text-align: center;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 10px;
        }
        .subgroup-btn.disabled {
            background: #bdc3c7;
            color: #7f8c8d;
            cursor: not-allowed;
        }
        .subgroup-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        .test-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .btn:hover {
            background: #5a6fd8;
        }
    </style>
</head>
<body>
    <h1>üß™ Teste de Atualiza√ß√£o em Tempo Real</h1>
    
    <div class="test-panel">
        <h3>Simular Inscri√ß√µes</h3>
        <button class="btn" onclick="simularInscricao('A1')">‚ûï Inscri√ß√£o A1</button>
        <button class="btn" onclick="simularInscricao('A2')">‚ûï Inscri√ß√£o A2</button>
        <button class="btn" onclick="simularInscricao('A3')">‚ûï Inscri√ß√£o A3</button>
        <button class="btn" onclick="resetarDados()">üîÑ Resetar Dados</button>
        <button class="btn" onclick="atualizarContadores()">üîÑ Atualizar Contadores</button>
    </div>

    <div class="test-panel">
        <h3>Dados Atuais</h3>
        <p><strong>Grupo A:</strong> <span id="totalGrupoA">0</span>/45</p>
        <p><strong>Subgrupos:</strong> <span id="dadosSubgrupos">A1: 0, A2: 0, A3: 0, A4: 0, A5: 0</span></p>
    </div>
    
    <div id="subgroupOptions" class="subgroup-options"></div>
    
    <div class="test-panel">
        <h3>Logs de Atualiza√ß√£o</h3>
        <div id="logs" style="background: #f1f1f1; padding: 10px; border-radius: 5px; max-height: 200px; overflow-y: auto; font-family: monospace; font-size: 12px;"></div>
    </div>

    <script>
        // Simular dados de teste
        let estatisticas = {
            grupoA: 0,
            grupoB: 0,
            subgrupos: {
                'A1': 0,
                'A2': 0,
                'A3': 0,
                'A4': 0,
                'A5': 0,
                'B1': 0,
                'B2': 0,
                'B3': 0,
                'B4': 0,
                'B5': 0
            }
        };

        function log(mensagem) {
            const logs = document.getElementById('logs');
            const timestamp = new Date().toLocaleTimeString();
            logs.innerHTML += `[${timestamp}] ${mensagem}\n`;
            logs.scrollTop = logs.scrollHeight;
        }

        function atualizarInterface() {
            // Atualizar painel de dados
            document.getElementById('totalGrupoA').textContent = estatisticas.grupoA;
            
            const subgruposText = Object.entries(estatisticas.subgrupos)
                .filter(([key]) => key.startsWith('A'))
                .map(([key, value]) => `${key}: ${value}`)
                .join(', ');
            document.getElementById('dadosSubgrupos').textContent = subgruposText;

            // Atualizar bot√µes
            const subgroupOptions = document.getElementById('subgroupOptions');
            subgroupOptions.innerHTML = '';

            for (let i = 1; i <= 5; i++) {
                const subgrupo = `A${i}`;
                const votosSubgrupo = estatisticas.subgrupos[subgrupo] || 0;
                const disponivel = votosSubgrupo < 9;
                const vagasRestantes = 9 - votosSubgrupo;

                log(`Criando bot√£o ${subgrupo}: ${votosSubgrupo}/9`);

                const btn = document.createElement('button');
                btn.className = `subgroup-btn ${disponivel ? '' : 'disabled'}`;
                
                if (disponivel) {
                    btn.innerHTML = `
                        <strong>${subgrupo}</strong><br>
                        <span style="font-size: 1.1em; color: #2c3e50;">${votosSubgrupo}/9</span><br>
                        <small style="color: #27ae60;">${vagasRestantes} vagas</small>
                    `;
                } else {
                    btn.innerHTML = `
                        <strong>${subgrupo}</strong><br>
                        <span style="font-size: 1.1em; color: #e74c3c;">9/9</span><br>
                        <small style="color: #e74c3c;">LOTADO</small>
                    `;
                }

                subgroupOptions.appendChild(btn);
            }
        }

        function simularInscricao(subgrupo) {
            if (estatisticas.subgrupos[subgrupo] < 9) {
                estatisticas.subgrupos[subgrupo]++;
                estatisticas.grupoA = Object.entries(estatisticas.subgrupos)
                    .filter(([key]) => key.startsWith('A'))
                    .reduce((sum, [key, value]) => sum + value, 0);
                
                log(`‚úÖ Inscri√ß√£o adicionada em ${subgrupo}. Total: ${estatisticas.subgrupos[subgrupo]}/9`);
                atualizarInterface();
            } else {
                log(`‚ùå ${subgrupo} est√° lotado!`);
            }
        }

        function resetarDados() {
            estatisticas = {
                grupoA: 0,
                grupoB: 0,
                subgrupos: {
                    'A1': 0, 'A2': 0, 'A3': 0, 'A4': 0, 'A5': 0,
                    'B1': 0, 'B2': 0, 'B3': 0, 'B4': 0, 'B5': 0
                }
            };
            log('üîÑ Dados resetados');
            atualizarInterface();
        }

        function atualizarContadores() {
            log('üîÑ Atualizando contadores manualmente');
            atualizarInterface();
        }

        // Inicializar
        log('üöÄ Teste iniciado');
        atualizarInterface();

        // Simular atualiza√ß√£o autom√°tica a cada 5 segundos
        setInterval(() => {
            log('‚è∞ Atualiza√ß√£o autom√°tica');
            atualizarInterface();
        }, 5000);
    </script>
</body>
</html> 